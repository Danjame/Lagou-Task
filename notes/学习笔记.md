# **开发脚手架及封装自动化构建工作流**
## 工程化
1. 解决问题
- 传统语言或者语法的弊端
- 无法使用模块化 / 组建化
- 重复的机械式工作
2. 价值
- 代码风格统一，质量保证
- 依赖后端服务借口的支持
- 整体依赖后端项目


## 脚手架工具
本质作用：创建项目基础结构，提供项目规范和约定（组织结构，开发范式，模块依赖，工具配置，基础代码）
工作原理：实际上是cli应用
1. yarn / node init 初始化一个 package.json 文件
2. 在 package.json 里bin字段定义入口文件
3. yarn link 命令可以连接到全局
4. 创建模版目录和模版文件，在模版文件里使用<%= 输入内容 %> 可以接收inquirer交互回来的数据
5. 通过命令行交互询问用户问题
- 安装inquirer模块
- 使用inquirer.prompt()方法提出问题，参数为对象数组，对象属性有type，输出属性名，message
- 可链式调用then()对答案进行处理
6. 根据用户回答的结果生成文件
- 倒入path和fs模块
- 安装模版引擎 yarn add ejs
- 使用path.join()生成模版目录，__dirname可获取当前文件路径
- 使用process.cwd()获取命令行目录作为目标目录
- 使用fs.readdir()读取文件目录，第一个参数为模版目录路径，第二参数为回调函数，回调函数的第一个参数为错误对象，第二个参数为文件的相对路径
- 使用模版引擎方法 ejs.renderFile()渲染文件，第一个参数为文件的绝对路径，第二个参数为需要填入的数据，第三个参数为回调函数，回调函数的第一个参数为错误对象，第二个参数为渲染结果
- 使用fs.writeFileSync()写入到目标文件，第一个参数为目标路径，第二个参数为写入内容


## 自动化构建

### Gulp
done参数，通知结束

1. 组合任务
- 串行任务 series
- 并行任务 parallel

2. 异步任务
- 

3. 工作原理
读取流=>转换流=>写入流
- createReadStream
- createWriteStream
- new Transform()
- createReadStream.pipe()